!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).videojs)}(this,(function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t);function o(t,e,n){var i=[];if(t&&t.childIndex_&&Object.keys(t.childIndex_).length)for(var r in t.childIndex_){var a,s=t.childIndex_[r];if(s&&s.name_==e)n.push(((a={parent:t,component:s,index:t.children_.indexOf(s)})[e]=s,a));i.push(o(s,e,n))}return{name:e,parent:t,children:i}}n.default.getComponent("Component").prototype.findChild=function(t){var e=[];return o(this,t,e),e};var i=n.default.browser,r=i.IS_IPHONE,a=i.IOS_VERSION;function s(){return s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},s.apply(this,arguments)}function l(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,u(t,e)}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.default.hook("setup",(function(t){t.playsinline(!1!==t.options_.playsinline),t.addClass("video-js"),r&&(t.addClass("vjs-is-iphone"),a<11&&t.addClass("vjs-iphone-below-11"))}));var d=n.default.getComponent("Component"),p=n.default.getComponent("ControlBar"),h=function(t){function e(e,n){var o;return(o=t.call(this,e,n)||this).addClass("vjs-control-separator"),o.addClass(n.className||""),o}return l(e,t),e}(d);n.default.registerComponent("ControlSeparator",h),n.default.hook("beforesetup",(function(t,e){var n=p.prototype.options_.children.slice(0),o=n.indexOf("CustomControlSpacer");return o>-1&&(p.prototype.options_.children=[{name:"ControlSeparator",className:"top",children:[]},{name:"ControlSeparator",className:"middle",children:n.splice(0,o+1)},{name:"ControlSeparator",className:"bottom",children:n}]),e})),n.default.hook("setup",(function(t){var e,n=!1!==t.options_.mobileView;e=480,(window.matchMedia?window.matchMedia("(max-width: "+e+"px)").matches:window.innerWidth<=e)&&n&&(t.controlBar.hide(),t.one("playing",(function(){var e=["mouseover","userinactive","touchstart"];t.one(e,(function n(){t.off(e,n),t.controlBar.show()})),t.one("touchend",(function(){t.userActive(!0)}))})),t.addClass("vjs-mobile-view"))}));var f=n.default.getComponent("SeekBar");f.prototype.getPercent=function(){var t=this.player_.currentTime()/this.player_.duration();return t>=1?1:t},f.prototype.handleMouseMove=function(t){var e=this.player_;if(n.default.dom.isSingleLeftClick(t)){var o=this.calculateDistance(t)*e.duration();o===e.duration()&&(o-=.1),e.currentTime(o),this.update()}},n.default.getComponent("ControlBar").prototype.options_.children=["PlayToggle","CustomControlSpacer","VolumePanel","CurrentTimeDisplay","TimeDivider","DurationDisplay","ProgressControl","CustomControlSpacer","SettingMenuButton","FullscreenToggle"],n.default.hook("setup",(function(t){t.on("mouseleave",(function(){t.userActive(!1)})),t.ready((function(){t.controls(!1!==t.options_.controls)}))}));var v=function(t){function e(e,n){var o;return(o=t.call(this,e,n)||this).title_=n.playerOptions.title||"",o.update(o.title_),o}l(e,t);var o=e.prototype;return o.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-title"});return this.contentEl_=n.default.dom.createEl("div",{className:"vjs-title-field"}),e.appendChild(this.contentEl_),e},o.update=function(t){t?this.show():this.hide(),this.player_.cache_.title=this.title_,this.title_=t,this.contentEl_.innerHTML=t},e}(n.default.getComponent("Component"));n.default.registerPlugin("title",(function(t){var e=this.player_.getChild("VideoTitle");if(void 0===t)return e.title_;e.update(t)})),n.default.registerComponent("VideoTitle",v),n.default.getComponent("Player").prototype.options_.children.splice(2,0,"VideoTitle");var m=n.default.getComponent("PlayToggle"),C=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var o=e.prototype;return o.createEl=function(){return n.default.dom.createEl("div",{className:"vjs-play-toggle-layer"})},o.handleClick=function(t){(this.player_.userActive()||this.player_.paused())&&m.prototype.handleClick.call(this,t)},e}(n.default.getComponent("ClickableComponent"));n.default.registerComponent("PlayToggleLayer",C);var g=n.default.getComponent("Player").prototype.options_.children,y=g.indexOf("loadingSpinner");g.splice(y,0,"PlayToggleLayer");var b=function(t){function e(e,n){var o;return(o=t.call(this,e,s({},n,{selectable:!0}))||this).addClass("vjs-context-menu-item"),o.controlText(n.label),o}l(e,t);var n=e.prototype;return n.createEl=function(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];var r=(e=t.prototype.createEl).call.apply(e,[this].concat(o));return r.insertAdjacentHTML("afterbegin",'<span aria-hidden="true" class="vjs-icon-placeholder '+(this.options_.icon||"")+'"></span>'),r},n.handleClick=function(){this.player_.findChild("ContextMenu")[0].component.hide()},e}(n.default.getComponent("MenuItem"));n.default.registerComponent("ContextMenuItem",b);var _=function(t){function e(e){var n;return(n=t.call(this,e,{name:"ContextMenuToggleLoop",label:"Loop",icon:"vjs-icon-loop"})||this).addClass("vjs-checkbox"),e.on("loadstart",n.update.bind(c(n))),n}l(e,t);var n=e.prototype;return n.update=function(){this.selected(this.player_.loop())},n.handleClick=function(){t.prototype.handleClick.call(this),this.player_.loop(!this.player_.loop()),this.update()},e}(b);n.default.registerComponent("ContextMenuToggleLoop",_);var j=function(t){function e(e){return t.call(this,e,{name:"AboutThisPlayer",label:"About This Player",icon:"vjs-icon-github"})||this}return l(e,t),e.prototype.handleClick=function(){t.prototype.handleClick.call(this),window.open("https://awesome-tool.github.io/x-video/docs/","_blank")},e}(b);n.default.registerComponent("AboutThisPlayer",j);var S=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-close-menu-layer vjs-close-context-menu"},n.handleClick=function(){this.options_.menu.hide()},e}(n.default.getComponent("ClickableComponent"));n.default.registerComponent("CloseContextMenu",S);var M=function(t){function e(e,n){var o;return(o=t.call(this,e,n)||this).addClass("vjs-context-menu"),o.hide(),o.player_.on("contextmenu",o.onContextmenu.bind(c(o))),o}l(e,t);var n=e.prototype;return n.createEl=function(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];var r=(e=t.prototype.createEl).call.apply(e,[this].concat(o)),a=new S(this.player_,{menu:this});return r.insertBefore(a.el_,r.firstElementChild),r},n.show=function(e,n){t.prototype.show.call(this),this.el_.style.top=n+"px",this.el_.style.left=e+"px"},n.onContextmenu=function(t){t.preventDefault();var e=this.player_.el().getBoundingClientRect(),n=t.pageX,o=t.pageY;if(o>e.y&&o-e.height<e.y&&n>e.x&&n-e.width<e.x){var i=n-e.x,r=o-e.y;this.show(i,r)}else this.hide()},n.handleClick=function(t){(t.button||0===t.button)&&2!==t.button&&this.hide()},e}(n.default.getComponent("Menu"));M.prototype.options_={children:["ContextMenuToggleLoop","AboutThisPlayer"]},n.default.registerComponent("ContextMenu",M),n.default.getComponent("Player").prototype.options_.children.push("ContextMenu");var x=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-close-menu-layer vjs-close-setting-menu"},n.handleClick=function(){this.options_.menu.menuButton_.hideMenu()},e}(n.default.getComponent("ClickableComponent"));n.default.registerComponent("CloseSettingMenu",x);var w=function(t){function e(e,n){var o;return(o=t.call(this,e,s({},n,{name:"SettingMenu"}))||this).addClass("vjs-setting-menu"),o}l(e,t);var n=e.prototype;return n.init=function(){this.contentEl_&&(this.mainMenuItems=this.children().slice(0),this.transform(this.mainMenuItems),this.addClass("vjs-setting-menu-ready"))},n.createEl=function(){var e=t.prototype.createEl.call(this),n=new x(this.player_,{menu:this});return e.insertBefore(n.el_,e.firstElementChild),e},n.update=function(t){var e=this;void 0===t&&(t=[]),this.children().slice(0).forEach((function(t){e.removeChild(t)})),t.forEach((function(t){e.addChild(t)}))},n.resize=function(t){var e=t.width,n=t.height;this.contentEl_.style.width=e+"px",this.contentEl_.style.height=n+"px"},n.getMenuDimension=function(t){var e=this.player_,n=new E(e);n.update(t),e.addChild(n);var o=n.contentEl_.getBoundingClientRect();return n.update(),n.dispose(),e.removeChild(n),o},n.transform=function(t){var e=this.getMenuDimension(t);this.update(t),this.resize(e)},n.restore=function(){this.transform(this.mainMenuItems)},n.removeStyle=function(){this.contentEl_.removeAttribute("style")},n.hide=function(){},e}(n.default.getComponent("Menu")),E=function(t){function e(e){return t.call(this,e,{name:"SettingMenuTemp"})||this}return l(e,t),e}(w);n.default.registerComponent("SettingMenu",w);var k=function(t){function e(e,o){var i;return(i=t.call(this,e,n.default.mergeOptions({selectable:!1},o))||this).menu=o.menu,i}return l(e,t),e}(n.default.getComponent("MenuItem"));n.default.registerComponent("SettingMenuItem",k);var T=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var o=e.prototype;return o.createEl=function(){var t=this.options_;return n.default.dom.createEl("li",{className:"vjs-menu-item vjs-setting-onoff-item",innerHTML:'\n        <div class="vjs-icon-placeholder '+(this.options_.icon||"")+'"></div>\n        <div>'+this.localize(t.label)+'</div>\n        <div class="vjs-spacer"></div>\n        <div>\n          <div class="vjs-onoff-button"></div>\n        </div>\n      '})},o.update=function(t){this.active=void 0===t?!this.active:t,this.active?this.addClass("vjs-active"):this.removeClass("vjs-active")},o.handleClick=function(){this.update()},o.selected=function(){},e}(k);n.default.registerComponent("SettingOnOffItem",T);var I=function(t){function e(e,n){var o;return(o=t.call(this,e,n)||this).addChild("Component",{},0),o.addClass("vjs-settings-sub-menu-item"),o.addClass("vjs-settings-sub-menu-title"),o}return l(e,t),e.prototype.handleClick=function(){this.options_.menu.restore()},e}(k);n.default.registerComponent("SettingSubOptionTitle",I);var O=function(t){function e(e,n){var o;return(o=t.call(this,e,n)||this).selectable=!0,Object.assign(c(o),n),o.addChild("Component",{},0),o.addClass("vjs-settings-sub-menu-item"),o.addClass("vjs-settings-sub-menu-option"),o.update(),o}l(e,t);var n=e.prototype;return n.update=function(){this.selected(this.value===this.parent.selected.value)},n.handleClick=function(){this.parent.onChange({index:this.options_.index}),this.menu.restore()},e}(k);n.default.registerComponent("SettingSubOptionItem",O);var P=function(t){function e(e,n){var o;return void 0===n&&(n={}),(o=t.call(this,e,n)||this).setEntries(o.options_.entries),o.entries.length||o.hide(),o}l(e,t);var o=e.prototype;return o.createEl=function(){var t=this.options_,e=t.icon,o=t.label,i=n.default.dom.createEl("li",{className:"vjs-menu-item vjs-setting-menu-item",innerHTML:'\n        <div class="vjs-icon-placeholder '+(e||"")+'"></div>\n        <div class="vjs-setting-menu-label">'+this.localize(o)+'</div>\n        <div class="vjs-spacer"></div>\n      '});return this.selectedValueEl=n.default.dom.createEl("div",{className:"vjs-setting-menu-value"}),i.appendChild(this.selectedValueEl),i},o.setEntries=function(t,e){var o=this;void 0===t&&(t=[]),Object.assign(this,function(t,e){return{entries:t=t.map((function(t,n){null!==t&&"object"!=typeof t&&(t={value:t,label:t});var o=!1;return void 0===e&&!0===t.default&&(o=!0,e=n),s({},t,{index:n,default:o})})),selected:t[e||0]}}(t,e)),this.updateSelectedValue();var i=n.default.getComponent(this.name_+"Child")||O;this.subMenuItems=[new I(this.player_,{label:this.options_.label,menu:this.menu})].concat(this.entries.map((function(t,e){var n=t.label,r=t.value;return new i(o.player_,{index:e,label:n,value:r,parent:o,menu:o.menu})})))},o.handleClick=function(){this.menu.transform(this.subMenuItems)},o.select=function(t){this.selected=this.entries[t],this.updateSelectedValue()},o.update=function(){this.subMenuItems.forEach((function(t){t.update&&t.update()}))},o.onChange=function(t){var e=t.index;this.select(e),this.update(e)},o.updateSelectedValue=function(){this.selected&&(this.selectedValueEl.innerHTML=this.localize(this.selected.label))},e}(k);n.default.registerComponent("SettingOptionItem",P);var B="";try{B=localStorage&&localStorage.getItem("vjs-plus-log")}catch(t){}var V="normal"===B||n.default.browser.IE_VERSION?console.info.bind(console,"[VJS Plus]:"):B?console.info.bind(console,"%c[VJS Plus]:","font-weight: bold; color:#2196F3;"):function(){},N=function(t){function e(e,n){var o;return(o=t.call(this,e,s({},n,{label:"Speed",icon:"vjs-icon-slow-motion-video",entries:[.5,.75,{label:"Normal",value:1,default:!0},1.25,1.5,2]}))||this).addClass("vjs-setting-playback-rate"),e.on("ratechange",(function(){var t=e.playbackRate(),n=o.entries.findIndex((function(e){var n=e.value;return t===n}));n>-1?(o.select(n),o.update(n)):V.warn("Incorrect playbackRate value, setting menu will not updated")})),o}return l(e,t),e.prototype.onChange=function(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];(e=t.prototype.onChange).call.apply(e,[this].concat(o)),this.player_.playbackRate(this.selected.value)},e}(P);n.default.registerComponent("PlaybackRateSettingItem",N);var A=function(t){function e(e,n){var o;return o=t.call(this,e,n)||this,e.addChild(o.menu),e.SettingMenu=o.menu,o.removeChild(o.menu),o}l(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-setting-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-setting-button "+t.prototype.buildWrapperCSSClass.call(this)},n.createMenu=function(){var t=new w(this.player_,{menuButton:this});return(this.options_.entries||[]).forEach((function(e){var n=t.addChild(e,{menu:t});t[e]=n})),t},n.hideMenu=function(){this.unpressButton(),this.el_.blur()},n.pressButton=function(){t.prototype.pressButton.call(this),this.menu.init()},n.unpressButton=function(){t.prototype.unpressButton.call(this),this.player_.removeClass("vjs-keep-control-showing"),this.menu.restore()},n.handleClick=function(){var t=this;this.player_.addClass("vjs-keep-control-showing"),this.buttonPressed_?this.unpressButton():this.pressButton(),this.off(document.body,"click",this.hideMenu),setTimeout((function(){t.one(document.body,"click",t.hideMenu)}),0)},e}(n.default.getComponent("MenuButton"));A.prototype.controlText_="Settings",A.prototype.options_={entries:["PlaybackRateSettingItem"]},n.default.registerComponent("SettingMenuButton",A)}));
