!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).videojs)}(this,(function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t);function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},i.apply(this,arguments)}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,a(t,e)}function a(t,e){return a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},a(t,e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var r=function(){function t(t,e){this.values=t.slice(0),this.index_=e||0,this.loop_=!0}var e=t.prototype;return e.index=function(t){if(void 0===t)return this.index_;this.index_=Math.max(0,Math.min(t,this.values.length-1))},e.loop=function(t){if(void 0===t)return this.loop_;this.loop_=!!t},e.calc=function(t){var e=this.index_+t,n=this.values.length;return this.loop_?(n+e)%n:Math.max(0,Math.min(e,n-1))},e.step=function(t){return this.index_=this.calc(t),this.values[this.index_]},e.current=function(){return this.values[this.index_]},e.next=function(){return this.step(1)},e.prev=function(){return this.step(-1)},e.ended=function(){return this.index_===this.values.length-1},t}(),s=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-playnext-spinner"},n.createEl=function(){var e=t.prototype.createEl.call(this,"div",{innerHTML:'\n        <div class="vjs-icon-placeholder vjs-icon-play"></div>\n        <svg width="60" height="60" viewbox="0 0 60 60">\n          <circle cx="30" cy="30" r="30"/>\n          <path class="vjs-playnext-spinner-border" fill="#FFF" transform="translate(30, 30)"/>\n          <circle id="donut" cx="30" cy="30" r="27"/>\n        </svg>\n      '});return this.path=e.querySelector("path"),e},n.handleClick=function(){this.player_.getChild("BeforePlayNextLayer").timeup()},e}(n.default.getComponent("ClickableComponent"));s.prototype.controlText_="PlayNext",n.default.registerComponent("PlayNextSpinner",s);var p=function(t){function e(e,n){var i;(i=t.call(this,e,n)||this).addChild("PlayNextSpinner",{},2),i.addChild("CancelPlayNextEl",{text:"&#10005;",className:"vjs-cancel-playnext-cross"},{},2),i.addChild("CancelPlayNextEl",{text:"Cancel",className:"vjs-cancel-playnext-button"},{},2),i.originPoster=e.poster()||e.playlist.current().poster,e.poster(i.getNext().poster);var o=i.dispose.bind(l(i)),a=["timeupdate","loadstart"];return e.one(a,o),i.on("dispose",(function(){e.off(a,o),e.removeClass("vjs-play-next-ready")})),i.countdown(e.options_.playNextCountDown),e.addClass("vjs-play-next-ready"),i}o(e,t);var i=e.prototype;return i.getNext=function(){var t=this.player_.playlist;return this.next=t.values[t.calc(1)],this.next},i.createEl=function(){var t=this.getNext().title,e=n.default.dom.createEl("div",{className:"vjs-before-playnext"});return this.contentEl_=n.default.dom.createEl("div",{className:"vjs-before-playnext-content",innerHTML:'\n        <div class="vjs-upnext-text">'+this.localize("Up Next")+'</div>\n        <div class="vjs-playnext-title">\n            <div>'+t+"</div>\n        </div>\n      "}),e.appendChild(this.contentEl_),e},i.countdown=function(t){if(void 0===t&&(t=10),0==t)return this.timeup(),!1;var e=this,n=0,i=Math.PI,o=t;o=o/360*1e3,function t(){n++;var a=(n%=360)*i/180,l=125*Math.sin(a),r=-125*Math.cos(a),s="M 0 0 v -125 A 125 125 1 "+(n>180?1:0)+" 1 "+l+" "+r+" z";e.getChild("PlayNextSpinner").path.setAttribute("d",s),0===n?e.timeup():e.timer=setTimeout(t,o)}()},i.timeup=function(){this.player_.playlist.next(),this.player_.playlist.play(),this.dispose()},i.cancel=function(){return this.player_.poster(this.originPoster),this},i.dispose=function(){clearTimeout(this.timer),this.player_.removeChild(this),t.prototype.dispose.call(this)},e}(n.default.getComponent("Component"));n.default.registerPlugin("playNext",(function(){var t=this.player_,e=t.playlist,n=e.loop()||!e.ended();if(e.autoPlayNext()&&n){var i=t.getChild("ControlBar"),o=t.children().indexOf(i)-1;t.addChild("BeforePlayNextLayer",{},o)}else t.poster(e.current().poster||"")})),n.default.registerComponent("BeforePlayNextLayer",p);var u=n.default.getComponent("SettingMenuButton"),c=function(t){function e(e){var n;return(n=t.call(this,e,{name:"ToggleAutoPlayNext",label:"Autoplay",icon:"vjs-icon-next-item"})||this).updateVisibility(),n.addClass("vjs-setting-autoplay"),e.on("playlist",(function(){n.updateVisibility(),n.update(e.playlist.autoPlayNext_)})),e.on("autoplaynext",(function(t,e){n.update(e)})),n}o(e,t);var n=e.prototype;return n.updateVisibility=function(){var t=this.player_.playlist;t&&t.values.length>1?this.show():this.hide()},n.update=function(e){t.prototype.update.call(this,e),this.player_.playlist.autoPlayNext_!==this.active&&this.player_.playlist.autoPlayNext(this.active)},e}(n.default.getComponent("SettingOnOffItem"));n.default.registerComponent("ToggleAutoPlayNext",c),u.prototype.options_.entries.splice(0,0,"ToggleAutoPlayNext");var d=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).updateVisibility(),i.controlText(n.controlText),e.on("playlist",i.updateVisibility.bind(l(i))),i}o(e,t);var n=e.prototype;return n.buildCSSClass=function(){return this.options_.className+" "+t.prototype.buildCSSClass.call(this)},n.updateVisibility=function(){var t=this.player_.playlist;t&&t.values.length>1?this.show():this.hide()},n.createEl=function(e,n,i){return t.prototype.createEl.call(this,e,{innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder '+this.options_.icon+'"></span>'},i)},n.handleClick=function(){var t=this.options_.controlText.toLowerCase();this.player_.playlist[t](),this.player_.playlist.play()},e}(n.default.getComponent("Button")),h=n.default.getComponent("ControlBar").prototype.options_.children,y=h.indexOf("PlayToggle");-1!==y&&(h.splice(0,0,{name:"PrevNextButton",className:"vjs-prev-control",icon:"vjs-icon-previous-item",controlText:"Prev"}),h.splice(y+2,0,{name:"PrevNextButton",className:"vjs-next-control",icon:"vjs-icon-next-item",controlText:"Next"})),n.default.registerComponent("PrevNextButton",d);var f=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).el_.querySelector(".vjs-icon-placeholder").innerHTML=i.localize(n.text),i}o(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-cancel-playnext "+this.options_.className},n.handleClick=function(){this.player_.getChild("BeforePlayNextLayer").cancel().dispose()},e}(n.default.getComponent("ClickableComponent"));f.prototype.controlText_="Cancel PlayNext",n.default.registerComponent("CancelPlayNextEl",f);var v=function(t){function e(e,n,i){var o;return void 0===i&&(i=0),(o=t.call(this,n,i)||this).player_=e,o.loadPoster_=!0,o.autoPlayNext_=!0,o.play(i),e.off("ended",e.playNext),e.on("ended",e.playNext),o}o(e,t);var n=e.prototype;return n.autoPlayNext=function(t){if(void 0===t)return this.autoPlayNext_;this.autoPlayNext_=!!t,this.player_.trigger("autoplaynext",this.autoPlayNext_)},n.play=function(t){void 0!==t&&this.index(t);var e=this.current(),n=e.poster,o=e.sources,a=e.title,l=this.player_,r=function(){l.poster(n||"")};l.title(""),l.poster(""),this.loadPoster_?(this.loadPoster_=!1,l.autoplay()?l.one("autoplay-failure",r):r()):l.one("loadedmetadata",(function(){l.play()})),"none"!==l.preload()&&(l.addClass("vjs-waiting"),l.one("loadedmetadata",(function(){l.removeClass("vjs-waiting")}))),l.src(o),l.title(a||""),l.trigger("playlist-change",i({},e,{index:this.index()}))},e}(r);n.default.registerPlugin("setPlayList",(function(t,e){var n=this.player_;n.playlist=new v(n,t,e),n.trigger("playlist",t)})),n.default.hook("setup",(function(t){var e=t.options_.playlist;if(e&&e.length){var n=e.findIndex((function(t){return t.default}));t.setPlayList(e,n)}}))}));
