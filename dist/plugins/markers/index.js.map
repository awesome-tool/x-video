{"version":3,"file":"index.js","sources":["../../../source/Plugin/Markers/Markers.js"],"sourcesContent":["import videojs from 'video.js';\n\n// type Marker = {\n//   time: number,\n//   duration: number,\n//   text?: string,\n//   class?: string,\n//   overlayText?: string,\n//   // private property\n//   key: string,\n// };\n\n// default setting\nconst defaultSetting = {\n  markerStyle: {\n    'width':'7px',\n    'border-radius': '30%',\n    'background-color': 'red',\n  },\n  markerTip: {\n    display: true,\n    text: function(marker) {\n      return \"Break: \" + marker.text;\n    },\n    time: function(marker) {\n      return marker.time;\n    },\n  },\n  breakOverlay:{\n    display: false,\n    displayTime: 3,\n    text: function(marker) {\n      return \"Break overlay: \" + marker.overlayText;\n    },\n    style: {\n      'width':'100%',\n      'height': '20%',\n      'background-color': 'rgba(0,0,0,0.7)',\n      'color': 'white',\n      'font-size': '17px',\n    },\n  },\n  onMarkerClick: function(marker) {},\n  onMarkerReached: function(marker, index) {},\n  markers: [],\n};\n\n// create a non-colliding random number\nfunction generateUUID() {\n  var d = new Date().getTime();\n  var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    var r = (d + Math.random()*16)%16 | 0;\n    d = Math.floor(d/16);\n    return (c=='x' ? r : (r&0x3|0x8)).toString(16);\n  });\n  return uuid;\n};\n\n/**\n * Returns the size of an element and its position\n * a default Object with 0 on each of its properties\n * its return in case there's an error\n * @param  {Element} element  el to get the size and position\n * @return {DOMRect|Object}   size and position of an element\n */\nfunction getElementBounding(element) {\n  var elementBounding;\n  const defaultBoundingRect = {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    width: 0,\n    height: 0,\n    right: 0\n  };\n\n  try {\n    elementBounding = element.getBoundingClientRect();\n  } catch (e) {\n    elementBounding = defaultBoundingRect;\n  }\n\n  return elementBounding;\n}\n\nconst NULL_INDEX = -1;\n\nfunction registerVideoJsMarkersPlugin(options) {\n  // copied from video.js/src/js/utils/merge-options.js since\n  // videojs 4 doens't support it by defualt.\n  if (!videojs.mergeOptions) {\n    function isPlain(value) {\n      return !!value && typeof value === 'object' &&\n        toString.call(value) === '[object Object]' &&\n        value.constructor === Object;\n    }\n    function mergeOptions(source1, source2) {\n\n      const result = {};\n      const sources = [source1, source2];\n      sources.forEach(source => {\n        if (!source) {\n          return;\n        }\n        Object.keys(source).forEach(key => {\n          let value = source[key];\n          if (!isPlain(value)) {\n            result[key] = value;\n            return;\n          }\n          if (!isPlain(result[key])) {\n            result[key] = {};\n          }\n          result[key] = mergeOptions(result[key], value);\n        })\n      });\n      return result;\n    }\n    videojs.mergeOptions = mergeOptions;\n  }\n\n  if (!videojs.dom.createEl) {\n    videojs.dom.createEl = function(tagName, props, attrs) {\n      const el = videojs.Player.prototype.dom.createEl(tagName, props);\n      if (!!attrs) {\n        Object.keys(attrs).forEach(key => {\n          el.setAttribute(key, attrs[key]);\n        });\n      }\n      return el;\n    }\n  }\n\n\n  /**\n   * register the markers plugin (dependent on jquery)\n   */\n  let setting = videojs.mergeOptions(defaultSetting, options),\n      markersMap = {},\n      markersList  = [], // list of markers sorted by time\n      currentMarkerIndex  = NULL_INDEX,\n      player       = this,\n      markerTip    = null,\n      breakOverlay = null,\n      overlayIndex = NULL_INDEX;\n\n  function sortMarkersList() {\n    // sort the list by time in asc order\n    markersList.sort((a, b) => {\n      return setting.markerTip.time(a) - setting.markerTip.time(b);\n    });\n  }\n\n  function addMarkers(newMarkers) {\n    newMarkers.forEach((marker) => {\n      marker.key = generateUUID();\n\n      player.el().querySelector('.vjs-progress-holder')\n        .appendChild(createMarkerDiv(marker));\n\n      // store marker in an internal hash map\n      markersMap[marker.key] = marker;\n      markersList.push(marker);\n    })\n\n    sortMarkersList();\n  }\n\n  function getPosition(marker) {\n    return (setting.markerTip.time(marker) / player.duration()) * 100;\n  }\n\n  function setMarkderDivStyle(marker, markerDiv) {\n    markerDiv.className = `vjs-marker ${marker.class || \"\"}`;\n\n    Object.keys(setting.markerStyle).forEach(key => {\n      markerDiv.style[key] = setting.markerStyle[key];\n    });\n\n    // hide out-of-bound markers\n    const ratio = marker.time / player.duration();\n    if (ratio < 0 || ratio > 1) {\n      markerDiv.style.display = 'none';\n    }\n\n    // set position\n    markerDiv.style.left = getPosition(marker) + '%';\n    if (marker.duration) {\n      markerDiv.style.width = (marker.duration / player.duration()) * 100 + '%';\n      markerDiv.style.marginLeft = '0px';\n    } else {\n      const markerDivBounding = getElementBounding(markerDiv);\n      markerDiv.style.marginLeft = markerDivBounding.width / 2 + 'px';\n    }\n  }\n\n  function createMarkerDiv(marker) {\n\n    var markerDiv = videojs.dom.createEl('div', {}, {\n      'data-marker-key': marker.key,\n      'data-marker-time': setting.markerTip.time(marker)\n    });\n\n    setMarkderDivStyle(marker, markerDiv);\n\n    // bind click event to seek to marker time\n    markerDiv.addEventListener('click', function(e) {\n      var preventDefault = false;\n      if (typeof setting.onMarkerClick === \"function\") {\n        // if return false, prevent default behavior\n        preventDefault = setting.onMarkerClick(marker) === false;\n      }\n\n      if (!preventDefault) {\n        var key = this.getAttribute('data-marker-key');\n        player.currentTime(setting.markerTip.time(markersMap[key]));\n      }\n    });\n\n    if (setting.markerTip.display) {\n      registerMarkerTipHandler(markerDiv);\n    }\n\n    return markerDiv;\n  }\n\n  function updateMarkers(force) {\n    // update UI for markers whose time changed\n    markersList.forEach((marker) => {\n      var markerDiv = player.el().querySelector(\".vjs-marker[data-marker-key='\" + marker.key +\"']\");\n      var markerTime = setting.markerTip.time(marker);\n\n      if (force || markerDiv.getAttribute('data-marker-time') !== markerTime) {\n        setMarkderDivStyle(marker, markerDiv);\n        markerDiv.setAttribute('data-marker-time', markerTime);\n      }\n    });\n    sortMarkersList();\n  }\n\n  function removeMarkers(indexArray) {\n    // reset overlay\n    if (!!breakOverlay){\n      overlayIndex = NULL_INDEX;\n      breakOverlay.style.visibility = \"hidden\";\n    }\n    currentMarkerIndex = NULL_INDEX;\n\n    let deleteIndexList = [];\n    indexArray.forEach((index) => {\n      let marker = markersList[index];\n      if (marker) {\n        // delete from memory\n        delete markersMap[marker.key];\n        deleteIndexList.push(index);\n\n        // delete from dom\n        let el = player.el().querySelector(\".vjs-marker[data-marker-key='\" + marker.key +\"']\");\n        el && el.parentNode.removeChild(el);\n      }\n    });\n\n    // clean up markers array\n    deleteIndexList.reverse();\n    deleteIndexList.forEach((deleteIndex) => {\n      markersList.splice(deleteIndex, 1);\n    });\n\n    // sort again\n    sortMarkersList();\n  }\n\n  // attach hover event handler\n  function registerMarkerTipHandler(markerDiv) {\n    markerDiv.addEventListener('mouseover', () => {\n      var marker = markersMap[markerDiv.getAttribute('data-marker-key')];\n      if (!!markerTip) {\n        if (setting.markerTip.html) {\n          markerTip.querySelector('.vjs-tip-inner').innerHTML = setting.markerTip.html(marker);\n        } else {\n          markerTip.querySelector('.vjs-tip-inner').innerText = setting.markerTip.text(marker);\n        }\n        // margin-left needs to minus the padding length to align correctly with the marker\n        markerTip.style.left = getPosition(marker) + '%';\n        var markerTipBounding = getElementBounding(markerTip);\n        var markerDivBounding = getElementBounding(markerDiv);\n        markerTip.style.marginLeft =\n          -parseFloat(markerTipBounding.width / 2) + parseFloat(markerDivBounding.width / 4) + 'px';\n        markerTip.style.visibility = 'visible';\n      }\n    });\n\n    markerDiv.addEventListener('mouseout',() => {\n      if (!!markerTip) {\n        markerTip.style.visibility = \"hidden\";\n      }\n    });\n  }\n\n  function initializeMarkerTip() {\n    markerTip = videojs.dom.createEl('div', {\n      className: 'vjs-tip',\n      innerHTML: \"<div class='vjs-tip-arrow'></div><div class='vjs-tip-inner'></div>\",\n    });\n    player.el().querySelector('.vjs-progress-holder').appendChild(markerTip);\n  }\n\n  // show or hide break overlays\n  function updateBreakOverlay() {\n    if (!setting.breakOverlay.display || currentMarkerIndex < 0) {\n      return;\n    }\n\n    var currentTime = player.currentTime();\n    var marker = markersList[currentMarkerIndex];\n    var markerTime = setting.markerTip.time(marker);\n\n    if (\n      currentTime >= markerTime &&\n      currentTime <= (markerTime + setting.breakOverlay.displayTime)\n    ) {\n      if (overlayIndex !== currentMarkerIndex) {\n        overlayIndex = currentMarkerIndex;\n        if (breakOverlay) {\n          breakOverlay.querySelector('.vjs-break-overlay-text').innerHTML = setting.breakOverlay.text(marker);\n        }\n      }\n\n      if (breakOverlay) {\n        breakOverlay.style.visibility = \"visible\";\n      }\n    } else {\n      overlayIndex = NULL_INDEX;\n      if (breakOverlay) {\n        breakOverlay.style.visibility = \"hidden\";\n      }\n    }\n  }\n\n  // problem when the next marker is within the overlay display time from the previous marker\n  function initializeOverlay() {\n    breakOverlay = videojs.dom.createEl('div', {\n      className: 'vjs-break-overlay',\n      innerHTML: \"<div class='vjs-break-overlay-text'></div>\"\n    });\n    Object.keys(setting.breakOverlay.style).forEach(key => {\n      if (breakOverlay) {\n        breakOverlay.style[key] = setting.breakOverlay.style[key];\n      }\n    });\n    player.el().appendChild(breakOverlay);\n    overlayIndex = NULL_INDEX;\n  }\n\n  function onTimeUpdate() {\n    onUpdateMarker();\n    updateBreakOverlay();\n    options.onTimeUpdateAfterMarkerUpdate && options.onTimeUpdateAfterMarkerUpdate();\n  }\n\n  function onUpdateMarker() {\n    /*\n      check marker reached in between markers\n      the logic here is that it triggers a new marker reached event only if the player\n      enters a new marker range (e.g. from marker 1 to marker 2). Thus, if player is on marker 1 and user clicked on marker 1 again, no new reached event is triggered)\n    */\n    if (!markersList.length) {\n      return;\n    }\n\n    var getNextMarkerTime = (index) => {\n      if (index < markersList.length - 1) {\n        return setting.markerTip.time(markersList[index + 1]);\n      }\n      // next marker time of last marker would be end of video time\n      return player.duration();\n    }\n    var currentTime = player.currentTime();\n    var newMarkerIndex = NULL_INDEX;\n\n    if (currentMarkerIndex !== NULL_INDEX) {\n      // check if staying at same marker\n      var nextMarkerTime = getNextMarkerTime(currentMarkerIndex);\n      if(\n        currentTime >= setting.markerTip.time(markersList[currentMarkerIndex]) &&\n        currentTime < nextMarkerTime\n      ) {\n        return;\n      }\n\n      // check for ending (at the end current time equals player duration)\n      if (\n        currentMarkerIndex === markersList.length - 1 &&\n        currentTime === player.duration()\n      ) {\n        return;\n      }\n    }\n\n    // check first marker, no marker is selected\n    if (currentTime < setting.markerTip.time(markersList[0])) {\n      newMarkerIndex = NULL_INDEX;\n    } else {\n      // look for new index\n      for (var i = 0; i < markersList.length; i++) {\n        nextMarkerTime = getNextMarkerTime(i);\n        if (\n          currentTime >= setting.markerTip.time(markersList[i]) &&\n          currentTime < nextMarkerTime\n        ) {\n          newMarkerIndex = i;\n          break;\n        }\n      }\n    }\n\n    // set new marker index\n    if (newMarkerIndex !== currentMarkerIndex) {\n      // trigger event if index is not null\n      if (newMarkerIndex !== NULL_INDEX && options.onMarkerReached) {\n        options.onMarkerReached(markersList[newMarkerIndex], newMarkerIndex);\n      }\n      currentMarkerIndex = newMarkerIndex;\n    }\n  }\n\n  // setup the whole thing\n  function initialize() {\n    if (setting.markerTip.display) {\n      initializeMarkerTip();\n    }\n\n    // remove existing markers if already initialized\n    player.markers.removeAll();\n    addMarkers(setting.markers);\n\n    if (setting.breakOverlay.display) {\n      initializeOverlay();\n    }\n    onTimeUpdate();\n    player.on(\"timeupdate\", onTimeUpdate);\n    player.off(\"loadedmetadata\");\n  }\n\n  // setup the plugin after we loaded video's meta data\n  player.on(\"loadedmetadata\", function() {\n    initialize();\n  });\n\n  // exposed plugin API\n  player.markers = {\n    getMarkers: function() {\n      return markersList;\n    },\n    next : function() {\n      // go to the next marker from current timestamp\n      const currentTime = player.currentTime();\n      for (var i = 0; i < markersList.length; i++) {\n        var markerTime = setting.markerTip.time(markersList[i]);\n        if (markerTime > currentTime) {\n          player.currentTime(markerTime);\n          break;\n        }\n      }\n    },\n    prev : function() {\n      // go to previous marker\n      const currentTime = player.currentTime();\n      for (var i = markersList.length - 1; i >= 0 ; i--) {\n        var markerTime = setting.markerTip.time(markersList[i]);\n        // add a threshold\n        if (markerTime + 0.5 < currentTime) {\n          player.currentTime(markerTime);\n          return;\n        }\n      }\n    },\n    add : function(newMarkers) {\n      // add new markers given an array of index\n      addMarkers(newMarkers);\n    },\n    remove: function(indexArray) {\n      // remove markers given an array of index\n      removeMarkers(indexArray);\n    },\n    removeAll: function() {\n      var indexArray = [];\n      for (var i = 0; i < markersList.length; i++) {\n        indexArray.push(i);\n      }\n      removeMarkers(indexArray);\n    },\n    // force - force all markers to be updated, regardless of if they have changed or not.\n    updateTime: function(force) {\n      // notify the plugin to update the UI for changes in marker times\n      updateMarkers(force);\n    },\n    reset: function(newMarkers) {\n      // remove all the existing markers and add new ones\n      player.markers.removeAll();\n      addMarkers(newMarkers);\n    },\n    destroy: function() {\n      // unregister the plugins and clean up even handlers\n      player.markers.removeAll();\n      breakOverlay && breakOverlay.remove();\n      markerTip && markerTip.remove();\n      player.off(\"timeupdate\", updateBreakOverlay);\n      delete player.markers;\n    },\n  };\n}\n\nvideojs.registerPlugin('markers', registerVideoJsMarkersPlugin);"],"names":["defaultSetting","markerStyle","markerTip","display","text","marker","time","breakOverlay","displayTime","overlayText","style","onMarkerClick","onMarkerReached","index","markers","generateUUID","d","Date","getTime","uuid","replace","c","r","Math","random","floor","toString","getElementBounding","element","elementBounding","defaultBoundingRect","top","bottom","left","width","height","right","getBoundingClientRect","e","NULL_INDEX","registerVideoJsMarkersPlugin","options","videojs","mergeOptions","isPlain","value","call","constructor","Object","source1","source2","result","sources","forEach","source","keys","key","dom","createEl","tagName","props","attrs","el","Player","prototype","setAttribute","setting","markersMap","markersList","currentMarkerIndex","player","overlayIndex","sortMarkersList","sort","a","b","addMarkers","newMarkers","querySelector","appendChild","createMarkerDiv","push","getPosition","duration","setMarkderDivStyle","markerDiv","className","ratio","marginLeft","markerDivBounding","addEventListener","preventDefault","getAttribute","currentTime","registerMarkerTipHandler","updateMarkers","force","markerTime","removeMarkers","indexArray","visibility","deleteIndexList","parentNode","removeChild","reverse","deleteIndex","splice","html","innerHTML","innerText","markerTipBounding","parseFloat","initializeMarkerTip","updateBreakOverlay","initializeOverlay","onTimeUpdate","onUpdateMarker","onTimeUpdateAfterMarkerUpdate","length","getNextMarkerTime","newMarkerIndex","nextMarkerTime","i","initialize","removeAll","on","off","getMarkers","next","prev","add","remove","updateTime","reset","destroy","registerPlugin"],"mappings":"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"}