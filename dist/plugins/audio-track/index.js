!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).videojs)}(this,(function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i.apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var r=function(e){function t(t,n){var o,a;(o=e.call(this,t,i({},n,{name:"AudioTrackSettingItem",label:"Audio",icon:"vjs-icon-audiotrack"}))||this).addClass("vjs-setting-audio");var r=function(e){"hls-audio-change"===e.name?(clearTimeout(a),a=setTimeout(o.handleAudioChangeEvent.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(o)),10)):"hls-alternate-audio"===e.name&&o.onAlternateAudio()};return t.ready((function(){t.tech_.on("usage",r)})),t.on("dispose",(function(){t.tech_.off("usage",r)})),t.on("audio-change",(function(e,t){var n=t.index;o.select(n),o.update(n)})),t.on("loadstart",(function(){o.hide()})),o}o(t,e);var n=t.prototype;return n.onChange=function(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];(t=e.prototype.onChange).call.apply(t,[this].concat(i)),this.player_.audio().pick(this.selected.value)},n.onAlternateAudio=function(){var e=this,t=this.player_.audio().values().map((function(t,n){var i=t.id,o=t.kind,a=t.label,r=t.language;return{label:e.localize(a),value:n,id:i,kind:o,language:r,index:n,track:t}}));this.player_.trigger("before-audio-setup",t),this.setEntries(t),this.show(),this.player_.trigger("audio",t)},n.handleAudioChangeEvent=function(){var e=this,t=this.player_.audio().values().reduce((function(t,n,i){return n.enabled&&(t=e.entries[i]),t}),{});this.player_.trigger("audio-change",t)},t}(n.default.getComponent("SettingOptionItem"));n.default.getComponent("SettingMenuButton").prototype.options_.entries.push("AudioTrackSettingItem"),n.default.registerComponent("AudioTrackSettingItem",r);var u=function(e){function t(t,n){var i;return void 0===n&&(n={}),(i=e.call(this,t,n)||this).track=i.values().find((function(e){return e.enabled})),t.on("audio-change",(function(e,t){var n=t.index;i.track=i.values()[n]})),i}o(t,e);var n=t.prototype;return n.values=function(){for(var e=this.player.audioTracks(),t=[],n=0;n<e.length;n++)t.push(e[n]);return t},n.pick=function(e){var t=this.values()[e];t&&(this.track.enabled=!1,this.track=t,t.enabled=!0)},t}(n.default.getPlugin("plugin"));n.default.registerPlugin("audio",u)}));
